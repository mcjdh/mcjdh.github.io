<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>◉ ≈ ∞</title>
    <link rel="stylesheet" href="/css/base.css">
    <link rel="stylesheet" href="/css/ascii.css">
    <link rel="stylesheet" href="/css/symbols.css">
    <link rel="stylesheet" href="/css/navigation.css">
    <link rel="stylesheet" href="/css/harmonics.css">
</head>
<body>
    <div class="container">
        <div class="border">
            <div class="ascii-art">
╔═══════════════════════════════════════════════╗
║            ◉ Stellar Nurseries ◉             ║
║                                               ║
║        Where stars are born from dust        ║
╚═══════════════════════════════════════════════╝
            </div>
            
            <div class="ascii-art nebula-field">
    · ◦ ○ ◉ ☉ ◉ ○ ◦ ·
   ◦ ≈ ∞ ∿ ☆ ∿ ∞ ≈ ◦
  ○ ∿ ♢ ◊ ◈ ◊ ♢ ∿ ○
 ◉ ☆ ◊ ✧ ✦ ✧ ◊ ☆ ◉
☉ ∿ ◈ ✦ ⟐ ✦ ◈ ∿ ☉
 ◉ ☆ ◊ ✧ ✦ ✧ ◊ ☆ ◉
  ○ ∿ ♢ ◊ ◈ ◊ ♢ ∿ ○
   ◦ ≈ ∞ ∿ ☆ ∿ ∞ ≈ ◦
    · ◦ ○ ◉ ☉ ◉ ○ ◦ ·
            </div>
            
            <div class="divider">∿∿∿∿∿∿∿∿∿∿∿∿∿∿∿∿∿∿∿∿∿∿∿∿∿∿∿∿∿∿∿∿∿∿∿∿</div>
            
            <div class="symbol-grid">
                <div class="symbol nebula-type" data-type="emission">◉</div>
                <div class="symbol nebula-type" data-type="reflection">◎</div>
                <div class="symbol nebula-type" data-type="planetary">⊙</div>
                <div class="symbol nebula-type" data-type="dark">●</div>
                <div class="symbol nebula-type" data-type="supernova">✦</div>
                <div class="symbol nebula-type" data-type="molecular">☁</div>
                <div class="symbol nebula-type" data-type="hii">☉</div>
                <div class="symbol nebula-type" data-type="spiral">🌀</div>
            </div>
            
            <div class="nebula-simulation" id="nebula-sim">
                <canvas id="nebula-canvas" width="400" height="300"></canvas>
                <div class="sim-controls">
                    <div class="control-info">Press SPACE to create stellar wind</div>
                </div>
            </div>
            
            <div class="ascii-art" style="font-size: 0.8rem;">
    Famous Nebulae:
    
    Orion (M42):     ◉ ∿ ☆    |  Trapezium cluster
    Eagle (M16):     ⟐ ≈ ☉    |  Pillars of Creation  
    Horsehead:       ● ∿ ◉    |  Dark nebula
    Ring (M57):      ○ ⊙ ○    |  Planetary nebula
    Rosette (NGC 2237): ◉ ∿ ◉ |  Emission nebula
    
    ♫ T ~ 10-100 K  |  ρ ~ 10⁻²¹ kg/m³  |  λ ~ pc ♫
            </div>
            
            <div class="navigation">
                <a href="/realms/cosmos/" class="nav-link">✦</a>
                <a href="/" class="nav-link">◊</a>
                <a href="/realms/mathematics/" class="nav-link">∑</a>
            </div>
        </div>
    </div>
    
    <script src="/js/particles.js"></script>
    <script src="/js/quantum-particles.js"></script>
    <script src="/js/harmonics.js"></script>
    <script>
        // ♫ ◉ ∞
        window.harmonics.init();
        
        // ψ ◉ ∿
        const quantumField = window.quantumParticles.init([
            '◉', '◎', '⊙', '●', '✦', '☁', '☉', '🌀', '∿', '≈', '∞', '◊', '◈'
        ]);
        
        // ○ ● ◉
        initParticles(['◉', '◎', '⊙', '●', '✦', '☁', '☉']);
        
        // Nebula simulation
        const canvas = document.getElementById('nebula-canvas');
        const ctx = canvas.getContext('2d');
        
        class Particle {
            constructor(x, y, vx = 0, vy = 0, type = 'dust') {
                this.x = x;
                this.y = y;
                this.vx = vx;
                this.vy = vy;
                this.type = type;
                this.age = 0;
                this.maxAge = Math.random() * 1000 + 500;
                this.size = Math.random() * 3 + 1;
                this.opacity = Math.random() * 0.5 + 0.5;
                this.color = this.getColor();
            }
            
            getColor() {
                switch (this.type) {
                    case 'dust': return `rgba(139, 69, 19, ${this.opacity})`;
                    case 'gas': return `rgba(255, 100, 100, ${this.opacity})`;
                    case 'ionized': return `rgba(100, 255, 255, ${this.opacity})`;
                    case 'star': return `rgba(255, 255, 255, ${this.opacity})`;
                    default: return `rgba(200, 200, 200, ${this.opacity})`;
                }
            }
            
            update() {
                this.x += this.vx;
                this.y += this.vy;
                this.age++;
                
                // Gravity effects (simplified)
                this.vx *= 0.999;
                this.vy *= 0.999;
                
                // Fade over time
                this.opacity = Math.max(0, 1 - this.age / this.maxAge);
                this.color = this.getColor();
                
                // Wrap around edges
                if (this.x < 0) this.x = canvas.width;
                if (this.x > canvas.width) this.x = 0;
                if (this.y < 0) this.y = canvas.height;
                if (this.y > canvas.height) this.y = 0;
            }
            
            draw() {
                if (this.opacity <= 0) return;
                
                ctx.globalAlpha = this.opacity;
                ctx.fillStyle = this.color;
                ctx.beginPath();
                ctx.arc(this.x, this.y, this.size, 0, 2 * Math.PI);
                ctx.fill();
                ctx.globalAlpha = 1;
            }
            
            isDead() {
                return this.age >= this.maxAge || this.opacity <= 0;
            }
        }
        
        let particles = [];
        let stellarWind = false;
        
        // Initialize nebula
        function initNebula() {
            particles = [];
            
            // Create initial dust and gas distribution
            for (let i = 0; i < 200; i++) {
                const x = Math.random() * canvas.width;
                const y = Math.random() * canvas.height;
                const type = Math.random() < 0.7 ? 'dust' : 'gas';
                particles.push(new Particle(x, y, 0, 0, type));
            }
            
            // Add some proto-stars
            for (let i = 0; i < 5; i++) {
                const x = Math.random() * canvas.width;
                const y = Math.random() * canvas.height;
                particles.push(new Particle(x, y, 0, 0, 'star'));
            }
        }
        
        function createStellarWind(centerX, centerY) {
            for (let i = 0; i < 50; i++) {
                const angle = Math.random() * 2 * Math.PI;
                const speed = Math.random() * 3 + 1;
                const distance = Math.random() * 50 + 10;
                
                const x = centerX + Math.cos(angle) * distance;
                const y = centerY + Math.sin(angle) * distance;
                const vx = Math.cos(angle) * speed;
                const vy = Math.sin(angle) * speed;
                
                particles.push(new Particle(x, y, vx, vy, 'ionized'));
            }
        }
        
        function animate() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            // Background stars
            ctx.fillStyle = 'rgba(255, 255, 255, 0.1)';
            for (let i = 0; i < 50; i++) {
                const x = Math.random() * canvas.width;
                const y = Math.random() * canvas.height;
                ctx.beginPath();
                ctx.arc(x, y, 0.5, 0, 2 * Math.PI);
                ctx.fill();
            }
            
            // Update and draw particles
            particles = particles.filter(particle => {
                particle.update();
                particle.draw();
                return !particle.isDead();
            });
            
            // Add new particles occasionally
            if (Math.random() < 0.1) {
                const x = Math.random() * canvas.width;
                const y = Math.random() * canvas.height;
                const type = Math.random() < 0.8 ? 'dust' : 'gas';
                particles.push(new Particle(x, y, 0, 0, type));
            }
            
            requestAnimationFrame(animate);
        }
        
        // Interactive nebula types
        document.querySelectorAll('.nebula-type').forEach(element => {
            element.addEventListener('click', () => {
                const type = element.dataset.type;
                showNebulaInfo(type, element);
            });
        });
        
        function showNebulaInfo(type, element) {
            const nebulaInfo = {
                emission: {
                    name: 'Emission Nebula',
                    symbol: '◉',
                    description: 'Glows from ionized hydrogen',
                    temp: '8,000-10,000 K',
                    color: 'Red (Hα)',
                    example: 'Orion Nebula (M42)'
                },
                reflection: {
                    name: 'Reflection Nebula',
                    symbol: '◎',
                    description: 'Reflects starlight from dust',
                    temp: '~100 K',
                    color: 'Blue',
                    example: 'Pleiades'
                },
                planetary: {
                    name: 'Planetary Nebula',
                    symbol: '⊙',
                    description: 'Shell around dying star',
                    temp: '30,000-100,000 K',
                    color: 'Various',
                    example: 'Ring Nebula (M57)'
                },
                dark: {
                    name: 'Dark Nebula',
                    symbol: '●',
                    description: 'Blocks background light',
                    temp: '10-20 K',
                    color: 'Dark silhouette',
                    example: 'Horsehead Nebula'
                },
                supernova: {
                    name: 'Supernova Remnant',
                    symbol: '✦',
                    description: 'Explosion aftermath',
                    temp: '1,000,000 K',
                    color: 'X-ray bright',
                    example: 'Crab Nebula (M1)'
                },
                molecular: {
                    name: 'Molecular Cloud',
                    symbol: '☁',
                    description: 'Star formation region',
                    temp: '10-50 K',
                    color: 'Infrared',
                    example: 'Eagle Nebula (M16)'
                },
                hii: {
                    name: 'HII Region',
                    symbol: '☉',
                    description: 'Ionized hydrogen',
                    temp: '8,000 K',
                    color: 'Red',
                    example: 'Rosette Nebula'
                },
                spiral: {
                    name: 'Spiral Arms',
                    symbol: '🌀',
                    description: 'Galactic structure',
                    temp: 'Various',
                    color: 'Blue-white',
                    example: 'Milky Way arms'
                }
            };
            
            const info = nebulaInfo[type];
            if (!info) return;
            
            const modal = document.createElement('div');
            modal.style.cssText = `
                position: fixed;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%);
                background: rgba(0,0,0,0.95);
                color: white;
                padding: 2rem;
                border: 2px solid gold;
                border-radius: 10px;
                z-index: 1000;
                font-family: monospace;
                max-width: 400px;
            `;
            
            modal.innerHTML = `
                <h3>${info.symbol} ${info.name}</h3>
                <div style="margin: 1rem 0;">
                    <div><strong>Description:</strong> ${info.description}</div>
                    <div><strong>Temperature:</strong> ${info.temp}</div>
                    <div><strong>Color:</strong> ${info.color}</div>
                    <div><strong>Example:</strong> ${info.example}</div>
                </div>
                <div style="margin-top: 1.5rem; text-align: center; color: gold;">
                    ${info.symbol} ∿ ∞
                </div>
                <div style="margin-top: 1rem; font-size: 0.8rem; opacity: 0.7; text-align: center;">
                    ⌨ → ∅
                </div>
            `;
            
            document.body.appendChild(modal);
            
            // Animate the clicked element
            element.style.animation = 'nebula-pulse 2s ease-in-out infinite';
            
            const dismissHandler = () => {
                modal.remove();
                element.style.animation = '';
                document.removeEventListener('keydown', dismissHandler);
            };
            
            setTimeout(() => {
                document.addEventListener('keydown', dismissHandler);
            }, 100);
        }
        
        // Keyboard interactions
        document.addEventListener('keydown', (e) => {
            if (e.key === ' ') {
                e.preventDefault();
                stellarWind = true;
                const centerX = canvas.width / 2;
                const centerY = canvas.height / 2;
                createStellarWind(centerX, centerY);
            }
            
            if (e.key === 'n' || e.key === 'N') {
                initNebula();
            }
        });
        
        // Mouse interaction for stellar wind
        canvas.addEventListener('click', (e) => {
            const rect = canvas.getBoundingClientRect();
            const x = e.clientX - rect.left;
            const y = e.clientY - rect.top;
            createStellarWind(x, y);
        });
        
        // Nebula field animation
        function animateNebulaField() {
            const field = document.querySelector('.nebula-field');
            const symbols = ['·', '◦', '○', '◉', '☉', '◈', '◊', '♢', '✧', '✦', '☆', '∿', '≈', '∞'];
            
            setInterval(() => {
                if (Math.random() > 0.95) {
                    const originalText = field.textContent;
                    let newText = originalText;
                    
                    // Replace a random character with a random symbol
                    const randomIndex = Math.floor(Math.random() * originalText.length);
                    const randomSymbol = symbols[Math.floor(Math.random() * symbols.length)];
                    
                    newText = originalText.substring(0, randomIndex) + 
                             randomSymbol + 
                             originalText.substring(randomIndex + 1);
                    
                    field.textContent = newText;
                    
                    // Restore original after a moment
                    setTimeout(() => {
                        field.textContent = originalText;
                    }, 200);
                }
            }, 100);
        }
        
        // Initialize
        initNebula();
        animate();
        animateNebulaField();
        
        // Add custom CSS
        const style = document.createElement('style');
        style.textContent = `
            @keyframes nebula-pulse {
                0%, 100% { transform: scale(1); opacity: 1; }
                50% { transform: scale(1.2); opacity: 0.8; box-shadow: 0 0 20px gold; }
            }
            
            .nebula-type {
                cursor: pointer;
                transition: all 0.3s ease;
            }
            
            .nebula-type:hover {
                transform: scale(1.1);
                box-shadow: 0 0 15px rgba(255,215,0,0.5);
            }
            
            .nebula-simulation {
                margin: 2rem 0;
                text-align: center;
            }
            
            #nebula-canvas {
                border: 2px solid rgba(255,255,255,0.3);
                border-radius: 10px;
                background: #000;
                cursor: crosshair;
            }
            
            .sim-controls {
                margin-top: 1rem;
                font-size: 0.9rem;
                opacity: 0.7;
            }
            
            .nebula-field {
                cursor: pointer;
                transition: all 0.2s ease;
            }
            
            .nebula-field:hover {
                opacity: 0.8;
                transform: scale(1.02);
            }
        `;
        document.head.appendChild(style);
        
        // Show welcome message
        setTimeout(() => {
            const welcome = document.createElement('div');
            welcome.style.cssText = `
                position: fixed;
                top: 20px;
                left: 50%;
                transform: translateX(-50%);
                background: rgba(0,0,0,0.8);
                color: white;
                padding: 1rem;
                border: 1px solid gold;
                border-radius: 5px;
                z-index: 1000;
                font-family: monospace;
                text-align: center;
            `;
            
            welcome.innerHTML = `
                <div>Click nebula symbols to learn | Click canvas for stellar wind</div>
                <div style="font-size: 0.8rem; opacity: 0.7; margin-top: 0.5rem;">
                    Press SPACE for central wind | N for new nebula
                </div>
            `;
            
            document.body.appendChild(welcome);
            
            setTimeout(() => welcome.remove(), 8000);
        }, 1000);
    </script>
</body>
</html>