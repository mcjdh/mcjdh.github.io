<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>⟨ψ⟩ ◊ ∞</title>
    <link rel="stylesheet" href="/css/base.css">
    <link rel="stylesheet" href="/css/ascii.css">
    <link rel="stylesheet" href="/css/symbols.css">
    <link rel="stylesheet" href="/css/navigation.css">
    <link rel="stylesheet" href="/css/harmonics.css">
</head>
<body>
    <div class="container">
        <div class="border">
            <div class="ascii-art">
╔═══════════════════════════════════════════════╗
║            ⟨ψ⟩ Quantum Computing ⟨ψ⟩          ║
║                                               ║
║      Where bits become qubits, logic becomes probability ║
╚═══════════════════════════════════════════════╝
            </div>
            
            <div class="ascii-art">
    |0⟩ ────■──── |ψ⟩
           │
    |0⟩ ────⊕──── |ψ'⟩
    
    ⟨ψ| = α|0⟩ + β|1⟩
    |α|² + |β|² = 1
    
     ┌───┐     ┌─┴─┐     ┌───┐
    ─┤ H ├──●──┤ X ├──●──┤ M ├─
     └───┘  │  └───┘  │  └───┘
            │         │
     ┌───┐  │  ┌───┐  │  ┌───┐
    ─┤ H ├──■──┤ Z ├──■──┤ M ├─
     └───┘     └───┘     └───┘
            </div>
            
            <div class="divider">∿∿∿∿∿∿∿∿∿∿∿∿∿∿∿∿∿∿∿∿∿∿∿∿∿∿∿∿∿∿∿∿∿∿∿∿</div>
            
            <div class="quantum-gates">
                <div class="gate-section">
                    <h3>Quantum Gates</h3>
                    <div class="symbol-grid">
                        <div class="symbol gate-symbol" data-gate="hadamard">H</div>
                        <div class="symbol gate-symbol" data-gate="pauli-x">X</div>
                        <div class="symbol gate-symbol" data-gate="pauli-y">Y</div>
                        <div class="symbol gate-symbol" data-gate="pauli-z">Z</div>
                        <div class="symbol gate-symbol" data-gate="cnot">⊕</div>
                        <div class="symbol gate-symbol" data-gate="phase">S</div>
                        <div class="symbol gate-symbol" data-gate="t-gate">T</div>
                        <div class="symbol gate-symbol" data-gate="measure">M</div>
                    </div>
                </div>
            </div>
            
            <div class="qubit-visualizer" id="qubit-viz">
                <div class="qubit-title">Qubit State Visualization</div>
                <div class="bloch-sphere" id="bloch-sphere">
                    <canvas id="bloch-canvas" width="200" height="200"></canvas>
                </div>
                <div class="state-info" id="state-info">
                    |ψ⟩ = α|0⟩ + β|1⟩
                </div>
            </div>
            
            <div class="ascii-art" style="font-size: 0.8rem;">
    Quantum Phenomena:
    
    Superposition: |ψ⟩ = α|0⟩ + β|1⟩    (qubit in both states)
    Entanglement:  |Φ⁺⟩ = (|00⟩ + |11⟩)/√2  (correlated qubits)
    Interference:  Amplitudes add, probabilities interfere
    
    Measurement:   P(0) = |α|²,  P(1) = |β|²
    No-Cloning:    Cannot copy arbitrary quantum state
    
    ♫ "Nature isn't classical, dammit!" - Richard Feynman ♫
            </div>
            
            <div class="quantum-circuit" id="quantum-circuit">
                <div class="circuit-title">Interactive Quantum Circuit</div>
                <div class="circuit-board" id="circuit-board">
                    <!-- Circuit will be generated here -->
                </div>
                <div class="circuit-controls">
                    <button class="circuit-btn" onclick="runCircuit()">Run Circuit</button>
                    <button class="circuit-btn" onclick="resetCircuit()">Reset</button>
                    <button class="circuit-btn" onclick="addRandomGate()">Random Gate</button>
                </div>
            </div>
            
            <div class="navigation">
                <a href="/realms/circuits/" class="nav-link">⌘</a>
                <a href="/" class="nav-link">◊</a>
                <a href="/realms/mathematics/" class="nav-link">∑</a>
            </div>
        </div>
    </div>
    
    <script src="/js/particles.js"></script>
    <script src="/js/quantum-particles.js"></script>
    <script src="/js/harmonics.js"></script>
    <script>
        // ♫ ⟨ψ⟩ ∞
        window.harmonics.init();
        
        // ψ ⟨ψ⟩ ∿
        const quantumField = window.quantumParticles.init([
            '⟨ψ⟩', '|0⟩', '|1⟩', '|+⟩', '|-⟩', 'H', 'X', 'Y', 'Z', '⊕', 'α', 'β', '∞'
        ]);
        
        // ○ ● ◉
        initParticles(['⟨ψ⟩', '|0⟩', '|1⟩', 'H', 'X', 'Y', 'Z', '⊕']);
        
        // Quantum state representation
        class QubitState {
            constructor(alpha = 1, beta = 0) {
                this.alpha = alpha; // amplitude for |0⟩
                this.beta = beta;   // amplitude for |1⟩
                this.normalize();
            }
            
            normalize() {
                const norm = Math.sqrt(this.alpha * this.alpha + this.beta * this.beta);
                this.alpha /= norm;
                this.beta /= norm;
            }
            
            applyGate(gate) {
                const newAlpha = gate[0][0] * this.alpha + gate[0][1] * this.beta;
                const newBeta = gate[1][0] * this.alpha + gate[1][1] * this.beta;
                this.alpha = newAlpha;
                this.beta = newBeta;
            }
            
            getProbabilities() {
                return {
                    prob0: this.alpha * this.alpha,
                    prob1: this.beta * this.beta
                };
            }
            
            measure() {
                const prob0 = this.alpha * this.alpha;
                return Math.random() < prob0 ? 0 : 1;
            }
            
            getBlochCoordinates() {
                // Convert state to Bloch sphere coordinates
                const theta = 2 * Math.acos(Math.abs(this.alpha));
                const phi = Math.arg ? Math.arg(this.beta / this.alpha) : 0;
                
                return {
                    x: Math.sin(theta) * Math.cos(phi),
                    y: Math.sin(theta) * Math.sin(phi),
                    z: Math.cos(theta)
                };
            }
        }
        
        // Quantum gates (as 2x2 matrices)
        const gates = {
            hadamard: [[1/Math.sqrt(2), 1/Math.sqrt(2)], [1/Math.sqrt(2), -1/Math.sqrt(2)]],
            'pauli-x': [[0, 1], [1, 0]],
            'pauli-y': [[0, -1], [1, 0]], // Simplified (imaginary units omitted)
            'pauli-z': [[1, 0], [0, -1]],
            phase: [[1, 0], [0, 1]], // Simplified S gate
            't-gate': [[1, 0], [0, Math.cos(Math.PI/4)]], // Simplified T gate
            identity: [[1, 0], [0, 1]]
        };
        
        let currentQubit = new QubitState(1, 0); // Start in |0⟩ state
        
        // Bloch sphere visualization
        function drawBlochSphere() {
            const canvas = document.getElementById('bloch-canvas');
            const ctx = canvas.getContext('2d');
            const centerX = canvas.width / 2;
            const centerY = canvas.height / 2;
            const radius = 80;
            
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            // Draw sphere outline
            ctx.strokeStyle = 'rgba(255,255,255,0.3)';
            ctx.lineWidth = 2;
            ctx.beginPath();
            ctx.arc(centerX, centerY, radius, 0, 2 * Math.PI);
            ctx.stroke();
            
            // Draw axes
            ctx.strokeStyle = 'rgba(255,255,255,0.5)';
            ctx.lineWidth = 1;
            
            // X axis
            ctx.beginPath();
            ctx.moveTo(centerX - radius, centerY);
            ctx.lineTo(centerX + radius, centerY);
            ctx.stroke();
            
            // Y axis (ellipse for 3D effect)
            ctx.beginPath();
            ctx.ellipse(centerX, centerY, radius, radius * 0.3, 0, 0, 2 * Math.PI);
            ctx.stroke();
            
            // Z axis
            ctx.beginPath();
            ctx.moveTo(centerX, centerY - radius);
            ctx.lineTo(centerX, centerY + radius);
            ctx.stroke();
            
            // Labels
            ctx.fillStyle = 'white';
            ctx.font = '12px monospace';
            ctx.fillText('|0⟩', centerX - 10, centerY - radius - 10);
            ctx.fillText('|1⟩', centerX - 10, centerY + radius + 20);
            ctx.fillText('|+⟩', centerX + radius + 5, centerY + 5);
            ctx.fillText('|-⟩', centerX - radius - 20, centerY + 5);
            
            // Draw state vector
            const coords = currentQubit.getBlochCoordinates();
            const x = centerX + coords.x * radius;
            const y = centerY - coords.z * radius; // Invert Z for screen coordinates
            
            // State vector
            ctx.strokeStyle = 'gold';
            ctx.lineWidth = 3;
            ctx.beginPath();
            ctx.moveTo(centerX, centerY);
            ctx.lineTo(x, y);
            ctx.stroke();
            
            // State point
            ctx.fillStyle = 'gold';
            ctx.beginPath();
            ctx.arc(x, y, 5, 0, 2 * Math.PI);
            ctx.fill();
        }
        
        function updateStateInfo() {
            const stateInfo = document.getElementById('state-info');
            const probs = currentQubit.getProbabilities();
            
            stateInfo.innerHTML = `
                |ψ⟩ = ${currentQubit.alpha.toFixed(3)}|0⟩ + ${currentQubit.beta.toFixed(3)}|1⟩<br>
                P(0) = ${probs.prob0.toFixed(3)}, P(1) = ${probs.prob1.toFixed(3)}
            `;
        }
        
        // Gate interactions
        document.querySelectorAll('.gate-symbol').forEach(element => {
            element.addEventListener('click', () => {
                const gateName = element.dataset.gate;
                applyGate(gateName, element);
            });
        });
        
        function applyGate(gateName, element) {
            if (gateName === 'measure') {
                measureQubit(element);
                return;
            }
            
            const gate = gates[gateName];
            if (gate) {
                currentQubit.applyGate(gate);
                updateVisualization();
                
                // Animate gate application
                element.style.animation = 'gate-pulse 0.5s ease-in-out';
                setTimeout(() => {
                    element.style.animation = '';
                }, 500);
                
                showGateInfo(gateName);
            }
        }
        
        function measureQubit(element) {
            const result = currentQubit.measure();
            
            // Collapse to measured state
            if (result === 0) {
                currentQubit = new QubitState(1, 0);
            } else {
                currentQubit = new QubitState(0, 1);
            }
            
            updateVisualization();
            
            // Show measurement result
            const resultDiv = document.createElement('div');
            resultDiv.style.cssText = `
                position: fixed;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%);
                background: rgba(0,0,0,0.9);
                color: white;
                padding: 2rem;
                border: 2px solid gold;
                border-radius: 10px;
                z-index: 1000;
                font-family: monospace;
                text-align: center;
                font-size: 1.5rem;
            `;
            
            resultDiv.innerHTML = `
                <div>Measurement Result</div>
                <div style="margin: 1rem 0; color: gold;">|${result}⟩</div>
                <div style="font-size: 1rem; opacity: 0.7;">
                    Qubit collapsed to ${result === 0 ? '|0⟩' : '|1⟩'} state
                </div>
            `;
            
            document.body.appendChild(resultDiv);
            
            setTimeout(() => resultDiv.remove(), 3000);
            
            element.style.animation = 'measurement-flash 0.5s ease-in-out';
            setTimeout(() => {
                element.style.animation = '';
            }, 500);
        }
        
        function showGateInfo(gateName) {
            const gateInfo = {
                hadamard: {
                    name: 'Hadamard Gate (H)',
                    effect: 'Creates superposition: |0⟩ → (|0⟩ + |1⟩)/√2',
                    matrix: '1/√2 [[1,1],[1,-1]]'
                },
                'pauli-x': {
                    name: 'Pauli-X Gate (X)',
                    effect: 'Bit flip: |0⟩ ↔ |1⟩',
                    matrix: '[[0,1],[1,0]]'
                },
                'pauli-y': {
                    name: 'Pauli-Y Gate (Y)',
                    effect: 'Bit and phase flip',
                    matrix: '[[0,-i],[i,0]]'
                },
                'pauli-z': {
                    name: 'Pauli-Z Gate (Z)',
                    effect: 'Phase flip: |1⟩ → -|1⟩',
                    matrix: '[[1,0],[0,-1]]'
                },
                phase: {
                    name: 'Phase Gate (S)',
                    effect: 'Adds π/2 phase to |1⟩',
                    matrix: '[[1,0],[0,i]]'
                },
                't-gate': {
                    name: 'T Gate',
                    effect: 'Adds π/4 phase to |1⟩',
                    matrix: '[[1,0],[0,e^(iπ/4)]]'
                }
            };
            
            const info = gateInfo[gateName];
            if (!info) return;
            
            const infoDiv = document.createElement('div');
            infoDiv.style.cssText = `
                position: fixed;
                bottom: 20px;
                left: 50%;
                transform: translateX(-50%);
                background: rgba(0,0,0,0.8);
                color: white;
                padding: 1rem;
                border: 1px solid gold;
                border-radius: 5px;
                z-index: 1000;
                font-family: monospace;
                max-width: 300px;
            `;
            
            infoDiv.innerHTML = `
                <div style="font-weight: bold; margin-bottom: 0.5rem;">${info.name}</div>
                <div style="margin-bottom: 0.5rem;">${info.effect}</div>
                <div style="font-size: 0.8rem; opacity: 0.7;">${info.matrix}</div>
            `;
            
            document.body.appendChild(infoDiv);
            
            setTimeout(() => infoDiv.remove(), 3000);
        }
        
        function updateVisualization() {
            drawBlochSphere();
            updateStateInfo();
        }
        
        // Quantum circuit builder
        let circuit = [];
        
        function createCircuitBoard() {
            const board = document.getElementById('circuit-board');
            board.innerHTML = '';
            
            // Create wire
            const wire = document.createElement('div');
            wire.style.cssText = `
                width: 100%;
                height: 2px;
                background: white;
                position: relative;
                margin: 2rem 0;
            `;
            
            // Add gates to wire
            circuit.forEach((gate, index) => {
                const gateElement = document.createElement('div');
                gateElement.textContent = gate;
                gateElement.style.cssText = `
                    position: absolute;
                    left: ${(index + 1) * 60}px;
                    top: -15px;
                    width: 30px;
                    height: 30px;
                    background: rgba(255,255,255,0.1);
                    border: 2px solid white;
                    border-radius: 5px;
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    font-family: monospace;
                    font-weight: bold;
                    cursor: pointer;
                `;
                
                gateElement.addEventListener('click', () => {
                    circuit.splice(index, 1);
                    createCircuitBoard();
                });
                
                wire.appendChild(gateElement);
            });
            
            board.appendChild(wire);
        }
        
        function runCircuit() {
            currentQubit = new QubitState(1, 0); // Reset to |0⟩
            
            circuit.forEach((gateName, index) => {
                setTimeout(() => {
                    const gate = gates[gateName.toLowerCase().replace('-', '')];
                    if (gate) {
                        currentQubit.applyGate(gate);
                        updateVisualization();
                    }
                }, index * 500);
            });
        }
        
        function resetCircuit() {
            circuit = [];
            currentQubit = new QubitState(1, 0);
            createCircuitBoard();
            updateVisualization();
        }
        
        function addRandomGate() {
            const gateNames = ['H', 'X', 'Y', 'Z', 'S', 'T'];
            const randomGate = gateNames[Math.floor(Math.random() * gateNames.length)];
            circuit.push(randomGate);
            createCircuitBoard();
        }
        
        // Keyboard interactions
        document.addEventListener('keydown', (e) => {
            const gateKeys = {
                'h': 'hadamard',
                'x': 'pauli-x',
                'y': 'pauli-y',
                'z': 'pauli-z',
                's': 'phase',
                't': 't-gate',
                'm': 'measure'
            };
            
            const gateName = gateKeys[e.key.toLowerCase()];
            if (gateName) {
                const element = document.querySelector(`[data-gate="${gateName}"]`);
                if (element) {
                    applyGate(gateName, element);
                }
            }
            
            if (e.key === 'r' || e.key === 'R') {
                currentQubit = new QubitState(1, 0);
                updateVisualization();
            }
            
            if (e.key === 'q' || e.key === 'Q') {
                showQuantumInfo();
            }
        });
        
        function showQuantumInfo() {
            const modal = document.createElement('div');
            modal.style.cssText = `
                position: fixed;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%);
                background: rgba(0,0,0,0.95);
                color: white;
                padding: 2rem;
                border: 2px solid gold;
                border-radius: 10px;
                z-index: 1000;
                font-family: monospace;
                max-width: 600px;
            `;
            
            modal.innerHTML = `
                <h3>⟨ψ⟩ Quantum Computing Principles ⟨ψ⟩</h3>
                <div style="margin: 1rem 0; line-height: 1.6;">
                    <p><strong>Superposition:</strong> Qubits can exist in multiple states simultaneously</p>
                    <p><strong>Entanglement:</strong> Quantum correlation between particles</p>
                    <p><strong>Interference:</strong> Quantum amplitudes can add constructively or destructively</p>
                    
                    <h4>Key Differences from Classical Computing:</h4>
                    <ul style="margin-left: 1rem;">
                        <li>Classical bit: 0 OR 1</li>
                        <li>Quantum bit: α|0⟩ + β|1⟩ (superposition)</li>
                        <li>Classical gates: deterministic</li>
                        <li>Quantum gates: unitary transformations</li>
                        <li>Classical measurement: read without changing</li>
                        <li>Quantum measurement: collapses superposition</li>
                    </ul>
                    
                    <h4>Applications:</h4>
                    <ul style="margin-left: 1rem;">
                        <li>Cryptography (Shor's algorithm)</li>
                        <li>Search (Grover's algorithm)</li>
                        <li>Simulation of quantum systems</li>
                        <li>Optimization problems</li>
                        <li>Machine learning</li>
                    </ul>
                </div>
                
                <div style="margin-top: 1rem; font-size: 0.8rem; opacity: 0.7; text-align: center;">
                    ⌨ → ∅
                </div>
            `;
            
            document.body.appendChild(modal);
            
            const dismissHandler = () => {
                modal.remove();
                document.removeEventListener('keydown', dismissHandler);
            };
            
            setTimeout(() => {
                document.addEventListener('keydown', dismissHandler);
            }, 100);
        }
        
        // Initialize
        updateVisualization();
        createCircuitBoard();
        
        // Add CSS animations
        const style = document.createElement('style');
        style.textContent = `
            @keyframes gate-pulse {
                0%, 100% { transform: scale(1); }
                50% { transform: scale(1.2); box-shadow: 0 0 20px gold; }
            }
            
            @keyframes measurement-flash {
                0%, 100% { background-color: transparent; }
                50% { background-color: rgba(255,0,0,0.5); }
            }
            
            .gate-symbol {
                cursor: pointer;
                transition: all 0.3s ease;
                background: rgba(255,255,255,0.1);
                border: 1px solid rgba(255,255,255,0.3);
                border-radius: 5px;
                padding: 0.5rem;
            }
            
            .gate-symbol:hover {
                transform: scale(1.1);
                box-shadow: 0 0 15px rgba(255,215,0,0.5);
                background: rgba(255,255,255,0.2);
            }
            
            .qubit-visualizer {
                margin: 2rem 0;
                text-align: center;
                padding: 1rem;
                border: 1px solid rgba(255,255,255,0.2);
                border-radius: 10px;
                background: rgba(255,255,255,0.02);
            }
            
            .qubit-title {
                color: gold;
                margin-bottom: 1rem;
                font-weight: bold;
            }
            
            .bloch-sphere {
                margin: 1rem auto;
            }
            
            #bloch-canvas {
                border: 1px solid rgba(255,255,255,0.3);
                border-radius: 50%;
                background: rgba(0,0,0,0.5);
            }
            
            .state-info {
                margin-top: 1rem;
                font-family: monospace;
                color: gold;
            }
            
            .quantum-circuit {
                margin: 2rem 0;
                padding: 1rem;
                border: 1px solid rgba(255,255,255,0.2);
                border-radius: 10px;
                background: rgba(255,255,255,0.02);
            }
            
            .circuit-title {
                color: gold;
                margin-bottom: 1rem;
                font-weight: bold;
                text-align: center;
            }
            
            .circuit-board {
                min-height: 100px;
                margin: 1rem 0;
                padding: 1rem;
                border: 1px solid rgba(255,255,255,0.1);
                border-radius: 5px;
                background: rgba(0,0,0,0.3);
            }
            
            .circuit-controls {
                text-align: center;
                margin-top: 1rem;
            }
            
            .circuit-btn {
                background: rgba(255,255,255,0.1);
                color: white;
                border: 1px solid rgba(255,255,255,0.3);
                padding: 0.5rem 1rem;
                margin: 0 0.5rem;
                border-radius: 5px;
                cursor: pointer;
                font-family: monospace;
                transition: all 0.3s ease;
            }
            
            .circuit-btn:hover {
                background: rgba(255,255,255,0.2);
                transform: scale(1.05);
            }
            
            .gate-section h3 {
                color: gold;
                text-align: center;
                margin-bottom: 1rem;
            }
        `;
        document.head.appendChild(style);
        
        // Show welcome message
        setTimeout(() => {
            const welcome = document.createElement('div');
            welcome.style.cssText = `
                position: fixed;
                top: 20px;
                left: 50%;
                transform: translateX(-50%);
                background: rgba(0,0,0,0.8);
                color: white;
                padding: 1rem;
                border: 1px solid gold;
                border-radius: 5px;
                z-index: 1000;
                font-family: monospace;
                text-align: center;
            `;
            
            welcome.innerHTML = `
                <div>Click gates to apply | Watch qubit evolve on Bloch sphere</div>
                <div style="font-size: 0.8rem; opacity: 0.7; margin-top: 0.5rem;">
                    H=Hadamard, X/Y/Z=Pauli, M=Measure, R=Reset, Q=Info
                </div>
            `;
            
            document.body.appendChild(welcome);
            
            setTimeout(() => welcome.remove(), 8000);
        }, 1000);
    </script>
</body>
</html>